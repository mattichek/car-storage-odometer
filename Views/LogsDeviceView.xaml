<UserControl x:Class="car_storage_odometer.Views.LogsDeviceView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:converters="clr-namespace:car_storage_odometer.Converters"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d"
             Width="Auto" Height="Auto">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/car-storage-odometer;component/Styles/DashboardStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <converters:InvertBooleanConverter x:Key="InvertBooleanConverter"/>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="{StaticResource SecondaryBackgroundBrush}" CornerRadius="5" Padding="16" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Logi urządzeń" Style="{StaticResource TitleTextBlockStyle}" FontWeight="SemiBold" VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <Border Grid.Row="1"
                Background="{StaticResource SecondaryBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="5"
                Padding="20">

            <StackPanel>
                <WrapPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Data od:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <DatePicker SelectedDate="{Binding FilterDateFrom}" Width="120">
                            <DatePicker.Template>
                                <ControlTemplate TargetType="{x:Type DatePicker}">
                                    <Grid x:Name="PART_Root">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="3*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <DatePickerTextBox x:Name="PART_TextBox"
                                                           Grid.Column="0"
                                                           Background="Transparent"
                                                           Foreground="{StaticResource PrimaryForegroundBrush}"
                                                           BorderBrush="Transparent"
                                                           BorderThickness="0"
                                                           Padding="5"
                                                           CaretBrush="{StaticResource AccentBrush}"
                                                           VerticalContentAlignment="Center"
                                                           HorizontalContentAlignment="Left"/>
                                        <Button x:Name="PART_Button"
                                                Grid.Column="1"
                                                Style="{StaticResource {x:Type Button}}"
                                                Width="30"
                                                Margin="5,0,0,0"
                                                Background="{StaticResource SecondaryBackgroundBrush}"
                                                BorderThickness="0">
                                            <Path Data="M 0 0 L 4 4 L 8 0 Z" Stretch="Fill" Fill="{StaticResource PrimaryForegroundBrush}" Width="8" Height="4" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                        </Button>
                                        <Popup x:Name="PART_Popup"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               StaysOpen="False">
                                            <Border BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    Background="{StaticResource SecondaryBackgroundBrush}">
                                                <Calendar x:Name="PART_Calendar"
                                                          Foreground="{StaticResource PrimaryForegroundBrush}"
                                                          Background="{StaticResource SecondaryBackgroundBrush}"
                                                          BorderBrush="{StaticResource BorderBrush}"
                                                          BorderThickness="0"/>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </DatePicker.Template>
                            <DatePicker.Resources>
                                <Style TargetType="{x:Type Calendar}">
                                    <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                </Style>
                                <Style TargetType="{x:Type CalendarDayButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type CalendarDayButton}">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource HoverBackgroundBrush}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource SelectedBackgroundBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                                <Style TargetType="{x:Type CalendarButton}">
                                    <Setter Property="Background" Value="{StaticResource SurfaceBackgroundBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type CalendarButton}">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource HoverBackgroundBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </DatePicker.Resources>
                        </DatePicker>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Data do:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <DatePicker SelectedDate="{Binding FilterDateTo}" Width="120">
                            <DatePicker.Template>
                                <ControlTemplate TargetType="{x:Type DatePicker}">
                                    <Grid x:Name="PART_Root">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="3*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <DatePickerTextBox x:Name="PART_TextBox"
                                                           Grid.Column="0"
                                                           Background="Transparent"
                                                           Foreground="{StaticResource PrimaryForegroundBrush}"
                                                           BorderBrush="Transparent"
                                                           BorderThickness="0"
                                                           Padding="5"
                                                           CaretBrush="{StaticResource AccentBrush}"
                                                           VerticalContentAlignment="Center"
                                                           HorizontalContentAlignment="Left"/>
                                        <Button x:Name="PART_Button"
                                                Grid.Column="1"
                                                Style="{StaticResource {x:Type Button}}"
                                                Width="30"
                                                Margin="5,0,0,0"
                                                Background="{StaticResource SecondaryBackgroundBrush}"
                                                BorderThickness="0">
                                            <Path Data="M 0 0 L 4 4 L 8 0 Z" Stretch="Fill" Fill="{StaticResource PrimaryForegroundBrush}" Width="8" Height="4" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                                        </Button>
                                        <Popup x:Name="PART_Popup"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               StaysOpen="False">
                                            <Border BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    Background="{StaticResource SecondaryBackgroundBrush}">
                                                <Calendar x:Name="PART_Calendar"
                                                          Foreground="{StaticResource PrimaryForegroundBrush}"
                                                          Background="{StaticResource SecondaryBackgroundBrush}"
                                                          BorderBrush="{StaticResource BorderBrush}"
                                                          BorderThickness="0"/>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </DatePicker.Template>
                            <DatePicker.Resources>
                                <Style TargetType="{x:Type Calendar}">
                                    <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                </Style>
                                <Style TargetType="{x:Type CalendarDayButton}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type CalendarDayButton}">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource HoverBackgroundBrush}"/>
                                                    </Trigger>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource SelectedBackgroundBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                                <Style TargetType="{x:Type CalendarButton}">
                                    <Setter Property="Background" Value="{StaticResource SurfaceBackgroundBrush}"/>
                                    <Setter Property="Foreground" Value="{StaticResource PrimaryForegroundBrush}"/>
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="{x:Type CalendarButton}">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource HoverBackgroundBrush}"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </DatePicker.Resources>
                        </DatePicker>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Numer ser.:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <ComboBox ItemsSource="{Binding AvailableSerialNumbers}"
                                  SelectedItem="{Binding SelectedSerialNumberFilter}"
                                  Width="150"
                                  Style="{StaticResource {x:Type ComboBox}}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}"/>
                            </ComboBox.ItemContainerStyle>
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Grid.Column="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}">
                                            <ToggleButton.Template>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border x:Name="border" Grid.ColumnSpan="2"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                                                        <Path x:Name="arrow" Grid.Column="1"
                                                              Fill="{StaticResource PrimaryForegroundBrush}"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Margin="0,0,5,0" />
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Grid.Column="0"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center"
                                                          Margin="{TemplateBinding Padding}"/>
                                        <Popup x:Name="PART_Popup" Grid.ColumnSpan="2"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               StaysOpen="False"
                                               Focusable="False">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{StaticResource SecondaryBackgroundBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                <ScrollViewer Margin="4,6,4,6" MaxHeight="{TemplateBinding MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                </ScrollViewer>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </ComboBox.Template>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Z magazynu:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <ComboBox ItemsSource="{Binding AvailableWarehouses}"
                                  SelectedItem="{Binding SelectedFromWarehouseFilter}"
                                  Width="150"
                                  Style="{StaticResource {x:Type ComboBox}}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}"/>
                            </ComboBox.ItemContainerStyle>
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Grid.Column="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}">
                                            <ToggleButton.Template>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border x:Name="border" Grid.ColumnSpan="2"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                                                        <Path x:Name="arrow" Grid.Column="1"
                                                              Fill="{StaticResource PrimaryForegroundBrush}"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Margin="0,0,5,0" />
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Grid.Column="0"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center"
                                                          Margin="{TemplateBinding Padding}"/>
                                        <Popup x:Name="PART_Popup" Grid.ColumnSpan="2"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               StaysOpen="False"
                                               Focusable="False">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{StaticResource SecondaryBackgroundBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                <ScrollViewer Margin="4,6,4,6" MaxHeight="{TemplateBinding MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                </ScrollViewer>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </ComboBox.Template>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Do magazynu:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <ComboBox ItemsSource="{Binding AvailableWarehouses}"
                                  SelectedItem="{Binding SelectedToWarehouseFilter}"
                                  Width="150"
                                  Style="{StaticResource {x:Type ComboBox}}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}"/>
                            </ComboBox.ItemContainerStyle>
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Grid.Column="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}">
                                            <ToggleButton.Template>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border x:Name="border" Grid.ColumnSpan="2"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                                                        <Path x:Name="arrow" Grid.Column="1"
                                                              Fill="{StaticResource PrimaryForegroundBrush}"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Margin="0,0,5,0" />
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Grid.Column="0"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center"
                                                          Margin="{TemplateBinding Padding}"/>
                                        <Popup x:Name="PART_Popup" Grid.ColumnSpan="2"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               StaysOpen="False"
                                               Focusable="False">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{StaticResource SecondaryBackgroundBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                <ScrollViewer Margin="4,6,4,6" MaxHeight="{TemplateBinding MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                </ScrollViewer>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </ComboBox.Template>
                        </ComboBox>
                    </StackPanel>
                </WrapPanel>

                <WrapPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Od użytkownika:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <ComboBox ItemsSource="{Binding AvailableUsers}"
                                  SelectedItem="{Binding SelectedFromUserFilter}"
                                  Width="150"
                                  Style="{StaticResource {x:Type ComboBox}}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}"/>
                            </ComboBox.ItemContainerStyle>
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Grid.Column="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}">
                                            <ToggleButton.Template>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border x:Name="border" Grid.ColumnSpan="2"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                                                        <Path x:Name="arrow" Grid.Column="1"
                                                              Fill="{StaticResource PrimaryForegroundBrush}"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Margin="0,0,5,0" />
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Grid.Column="0"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center"
                                                          Margin="{TemplateBinding Padding}"/>
                                        <Popup x:Name="PART_Popup" Grid.ColumnSpan="2"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               StaysOpen="False"
                                               Focusable="False">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{StaticResource SecondaryBackgroundBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                <ScrollViewer Margin="4,6,4,6" MaxHeight="{TemplateBinding MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                </ScrollViewer>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </ComboBox.Template>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,20,10">
                        <TextBlock Text="Do użytkownika:" VerticalAlignment="Center" Margin="0,0,10,0" Style="{StaticResource BaseTextBlockStyle}"/>
                        <ComboBox ItemsSource="{Binding AvailableUsers}"
                                  SelectedItem="{Binding SelectedToUserFilter}"
                                  Width="150"
                                  Style="{StaticResource {x:Type ComboBox}}">
                            <ComboBox.ItemContainerStyle>
                                <Style TargetType="ComboBoxItem" BasedOn="{StaticResource {x:Type ComboBoxItem}}"/>
                            </ComboBox.ItemContainerStyle>
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Grid.Column="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      Background="{TemplateBinding Background}"
                                                      BorderBrush="{TemplateBinding BorderBrush}"
                                                      BorderThickness="{TemplateBinding BorderThickness}">
                                            <ToggleButton.Template>
                                                <ControlTemplate>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <Border x:Name="border" Grid.ColumnSpan="2"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3" />
                                                        <Path x:Name="arrow" Grid.Column="1"
                                                              Fill="{StaticResource PrimaryForegroundBrush}"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Margin="0,0,5,0" />
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="border" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Grid.Column="0"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                          HorizontalAlignment="Left"
                                                          VerticalAlignment="Center"
                                                          Margin="{TemplateBinding Padding}"/>
                                        <Popup x:Name="PART_Popup" Grid.ColumnSpan="2"
                                               AllowsTransparency="True"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               StaysOpen="False"
                                               Focusable="False">
                                            <Border x:Name="DropDownBorder"
                                                    Background="{StaticResource SecondaryBackgroundBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1"
                                                    CornerRadius="3">
                                                <ScrollViewer Margin="4,6,4,6" MaxHeight="{TemplateBinding MaxDropDownHeight}" SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                </ScrollViewer>
                                            </Border>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </ComboBox.Template>
                        </ComboBox>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <Button Content="Filtruj" Command="{Binding FilterLogsCommand}" Style="{StaticResource {x:Type Button}}" Margin="0,0,10,0"/>
                        <Button Content="Resetuj" Command="{Binding ResetFiltersCommand}" Margin="0,0,10,0">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border Background="#6C757D"
                                            BorderBrush="#6C757D"
                                            BorderThickness="{TemplateBinding BorderThickness}"
                                            CornerRadius="3">
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                          Margin="{TemplateBinding Padding}"
                                                          Content="{TemplateBinding Content}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#5a6268"/>
                                            <Setter Property="BorderBrush" Value="#5a6268"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter Property="Background" Value="#5a6268"/>
                                            <Setter Property="BorderBrush" Value="#5a6268"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </WrapPanel>

                <Separator Background="{StaticResource BorderBrush}" Height="1" Margin="0,0,0,15"/>

                <Border Background="{StaticResource SecondaryBackgroundBrush}" Padding="15" Margin="0,0,0,5">
                    <StackPanel>
                        <DataGrid ItemsSource="{Binding LatestDeviceLogs}"
                                  Style="{StaticResource {x:Type DataGrid}}"
                                  AutoGenerateColumns="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Id" Binding="{Binding LogId}" Width="Auto"/>
                                <DataGridTextColumn Header="Data" Binding="{Binding EventDate, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}" Width="Auto"/>
                                <DataGridTextColumn Header="Numer ser." Binding="{Binding SerialNumber}" Width="Auto"/>
                                <DataGridTextColumn Header="Akcja" Binding="{Binding Event}" Width="*"/>
                                <DataGridTextColumn Header="Z magazynu" Binding="{Binding FromWarehouseName}" Width="*"/>
                                <DataGridTextColumn Header="Do magazynu" Binding="{Binding ToWarehouseName}" Width="*"/>
                                <DataGridTextColumn Header="Użytkownik" Binding="{Binding FromUserName}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>